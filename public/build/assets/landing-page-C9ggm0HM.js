import{r as x,j as t}from"./app-CDETa4Hd.js";import{l as R}from"./helpers-Bw55Ac1T.js";import{u as F,A as z,a as B,b as Z}from"./avatar-BCUtmGr6.js";import{B as S}from"./badge-CLpm4uUP.js";import{B as h}from"./button-D2PzfR0O.js";import{C as b}from"./calendar-boCD64AS.js";import{C as T,a as I}from"./card--EpSPgor.js";import{I as A}from"./input-BEuSA_vk.js";import{P as k,a as M,b as U}from"./popover-Dg6ahO_m.js";import{S as H,a as W,b as $,c as V,d as G,e as p}from"./select-DyJvFPmA.js";import{t as v,c as J,m as O,a as P,s as X,f as g,i as j}from"./id-CUEIbMhn.js";import{X as q}from"./index-BZA1-Wlo.js";import{N as K,F as Q}from"./footer-ey61OhFW.js";import ee from"./hero-section-CCXLOMrP.js";import te from"./statistik-section-ClW7BaVA.js";import"./index-IT8LveJ4.js";import"./index-DPBEDuac.js";import"./index-Bw85EvTU.js";import"./utils-7joyUr45.js";import"./floating-ui.react-dom-C39HHf4G.js";import"./createLucideIcon-toiSKoVf.js";import"./index-P2HfiIiT.js";import"./index-CPliXW_Z.js";import"./index-Ck1-PrDL.js";import"./check-D4A6hHJ8.js";import"./tslib.es6-BUas5LQb.js";import"./use-mobile-WLVraRkV.js";import"./app-logo-icon-DZJj4lHO.js";import"./proxy-B9kZJK0o.js";import"./chart-CcVmXtNu.js";import"./index-CDSR3el6.js";function ae(a,e){const s=v(a,e==null?void 0:e.in);return s.setHours(23,59,59,999),s}function E(a,e){const s=()=>J(e==null?void 0:e.in,NaN),l=le(a);let c;if(l.date){const o=ie(l.date,2);c=ce(o.restDateString,o.year)}if(!c||isNaN(+c))return s();const i=+c;let d=0,u;if(l.time&&(d=oe(l.time),isNaN(d)))return s();if(l.timezone){if(u=de(l.timezone),isNaN(u))return s()}else{const o=new Date(i+d),r=v(0,e==null?void 0:e.in);return r.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),r.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),r}return v(i+d+u,e==null?void 0:e.in)}const D={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},se=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ne=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,re=/^([+-])(\d{2})(?::?(\d{2}))?$/;function le(a){const e={},s=a.split(D.dateTimeDelimiter);let n;if(s.length>2)return e;if(/:/.test(s[0])?n=s[0]:(e.date=s[0],n=s[1],D.timeZoneDelimiter.test(e.date)&&(e.date=a.split(D.timeZoneDelimiter)[0],n=a.substr(e.date.length,a.length))),n){const l=D.timezone.exec(n);l?(e.time=n.replace(l[1],""),e.timezone=l[1]):e.time=n}return e}function ie(a,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=a.match(s);if(!n)return{year:NaN,restDateString:""};const l=n[1]?parseInt(n[1]):null,c=n[2]?parseInt(n[2]):null;return{year:c===null?l:c*100,restDateString:a.slice((n[1]||n[2]).length)}}function ce(a,e){if(e===null)return new Date(NaN);const s=a.match(se);if(!s)return new Date(NaN);const n=!!s[4],l=f(s[1]),c=f(s[2])-1,i=f(s[3]),d=f(s[4]),u=f(s[5])-1;if(n)return he(e,d,u)?ue(e,d,u):new Date(NaN);{const o=new Date(0);return!xe(e,c,i)||!fe(e,l)?new Date(NaN):(o.setUTCFullYear(e,c,Math.max(l,i)),o)}}function f(a){return a?parseInt(a):1}function oe(a){const e=a.match(ne);if(!e)return NaN;const s=N(e[1]),n=N(e[2]),l=N(e[3]);return pe(s,n,l)?s*O+n*P+l*1e3:NaN}function N(a){return a&&parseFloat(a.replace(",","."))||0}function de(a){if(a==="Z")return 0;const e=a.match(re);if(!e)return 0;const s=e[1]==="+"?-1:1,n=parseInt(e[2]),l=e[3]&&parseInt(e[3])||0;return ge(n,l)?s*(n*O+l*P):NaN}function ue(a,e,s){const n=new Date(0);n.setUTCFullYear(a,0,4);const l=n.getUTCDay()||7,c=(e-1)*7+s+1-l;return n.setUTCDate(n.getUTCDate()+c),n}const me=[31,null,31,30,31,30,31,31,30,31,30,31];function Y(a){return a%400===0||a%4===0&&a%100!==0}function xe(a,e,s){return e>=0&&e<=11&&s>=1&&s<=(me[e]||(Y(a)?29:28))}function fe(a,e){return e>=1&&e<=(Y(a)?366:365)}function he(a,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function pe(a,e,s){return a===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&a>=0&&a<25}function ge(a,e){return e>=0&&e<=59}function je({items:a}){const e=F(),[s,n]=x.useState(""),[l,c]=x.useState(5),[i,d]=x.useState({search:"",startDate:null,endDate:null,status:""});x.useEffect(()=>{const r=setTimeout(()=>{d(m=>({...m,search:s}))},500);return()=>clearTimeout(r)},[s]),x.useEffect(()=>{c(5)},[i]);const u=a.filter(r=>{const m=r.judul.toLowerCase().includes(i.search.toLowerCase()),_=i.status?r.latest_status.status===i.status:!0,y=new Date(r.created_at),w=i.startDate?X(new Date(i.startDate)):null,C=i.endDate?ae(new Date(i.endDate)):null,L=(!w||y>=w)&&(!C||y<=C);return m&&_&&L}),o=()=>{d({search:"",startDate:null,endDate:null,status:""}),n("")};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 max-w-3xl items-center gap-2 not-md:space-y-2 md:flex",children:[t.jsx(A,{placeholder:"Cari pengaduan...",className:"text-sm",value:s,onChange:r=>n(r.target.value)}),t.jsxs(k,{children:[t.jsx(M,{asChild:!0,children:t.jsx(h,{className:"not-md:w-full",variant:"outline",children:i.startDate?g(E(i.startDate),"d MMM yyyy",{locale:j}):"Dari Tanggal"})}),t.jsx(U,{className:"w-auto p-0",align:"start",children:t.jsx(b,{mode:"single",selected:i.startDate?new Date(i.startDate):void 0,onSelect:r=>d(m=>({...m,startDate:r?r.toISOString():null}))})})]}),t.jsxs(k,{children:[t.jsx(M,{asChild:!0,children:t.jsx(h,{className:"not-md:w-full",variant:"outline",children:i.endDate?g(E(i.endDate),"d MMM yyyy",{locale:j}):"Sampai Tanggal"})}),t.jsx(U,{className:"w-auto p-0",align:"start",children:t.jsx(b,{mode:"single",selected:i.endDate?new Date(i.endDate):void 0,onSelect:r=>d(m=>({...m,endDate:r?r.toISOString():null}))})})]}),t.jsxs(H,{value:i.status,onValueChange:r=>d(m=>({...m,status:r})),children:[t.jsx(W,{className:"md:w-[300px]",children:t.jsx($,{placeholder:"Pilih status",className:"whitespace-normal"})}),t.jsx(V,{children:t.jsxs(G,{children:[t.jsx(p,{value:"Diajukan",children:"Diajukan"}),t.jsx(p,{value:"Diproses",children:"Diproses"}),t.jsx(p,{value:"Selesai",children:"Selesai"}),t.jsx(p,{value:"Ditolak",children:"Ditolak"})]})})]}),(i.search||i.endDate||i.startDate||i.status)&&t.jsxs(h,{onClick:o,variant:"ghost",children:[t.jsx(q,{}),"Reset"]})]}),u.length>0?t.jsxs(t.Fragment,{children:[u.slice(0,l).map(r=>t.jsx(T,{children:t.jsxs(I,{children:[t.jsxs("div",{className:"items-center justify-between not-md:space-y-3 md:flex",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("p",{children:"Bidang:"}),t.jsx(S,{variant:"outline",children:r.bidang}),t.jsx(S,{className:"ml-4 bg-sky-800",children:r.latest_status.status})]}),t.jsxs("div",{className:"gap-4 text-sm text-gray-700 md:flex",children:[t.jsxs("p",{children:["Dibuat: ",g(r.created_at,"EEEE, d MMMM y",{locale:j})]}),t.jsxs("p",{children:["Pembaruan:"," ",g(r.latest_status.created_at,"EEEE, d MMMM y",{locale:j})]})]})]}),t.jsxs("div",{className:"mt-6 border-b pb-4",children:[t.jsx("h1",{className:"text-xl font-semibold text-blue-500",children:r.judul}),t.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:R(r.isi,300)})]}),t.jsx("div",{className:"mt-4 flex items-center justify-between",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"Pengaduan dari:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(z,{className:"h-8 w-8 overflow-hidden rounded-full",children:[t.jsx(B,{src:"/storage/"+r.user.avatar,alt:r.user.name}),t.jsx(Z,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:e(r.user.name)})]}),t.jsx("div",{className:"grid flex-1 items-center text-left text-sm leading-tight",children:t.jsx("span",{className:"truncate font-semibold text-blue-500",children:r.user.name})})]})]})})]})},r.id)),l<u.length&&t.jsx("div",{className:"mt-6 flex justify-center",children:t.jsx(h,{onClick:()=>c(r=>r+5),variant:"outline",children:"Lihat Lebih Banyak"})})]}):t.jsx(T,{className:"border-dashed py-10 shadow-none",children:t.jsx(I,{className:"flex items-center justify-center text-gray-500",children:"Tidak ada data ditemukan"})})]})}function De({children:a}){return t.jsxs("div",{className:"flex flex-col flex-1 h-full w-full",children:[t.jsx(K,{}),a]})}function qe({pengaduans:a,chartData:e,countAllPengaduan:s,countPengaduanDiproses:n,countPengaduanSelesai:l}){return F(),t.jsx(De,{children:t.jsxs("div",{className:"flex h-full w-full flex-1 flex-col",children:[t.jsx(ee,{}),t.jsx(te,{data:{chartData:e,countAllPengaduan:s,countPengaduanDiproses:n,countPengaduanSelesai:l}}),t.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-8 p-4 py-20",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-800",children:"Daftar Pengaduan"}),t.jsx(je,{items:a})]}),t.jsx(Q,{})]})})}export{qe as default};
