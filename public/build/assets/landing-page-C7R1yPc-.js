import{r as x,j as e}from"./app-CpIO0Rgy.js";import{l as L}from"./helpers-Bw55Ac1T.js";import{u as _,A as O,a as R,b as Y}from"./avatar-DuCOGHgW.js";import{B as P}from"./badge-FCzo2BBg.js";import{B as h}from"./button-CRQ7621k.js";import{C as w}from"./calendar-BsmLvycu.js";import{C as b,a as S}from"./card-DdZHFTlX.js";import{I as B}from"./input-DgS3hD2R.js";import{P as C,a as k,b as M}from"./popover-BUHm0WZ0.js";import{S as z,a as A,b as Z,c as H,d as V,e as f}from"./select-Cce8IxgA.js";import{t as U,c as q,m as W,a as $,s as G,f as j,i as g}from"./id-CN8iUG6p.js";import{X as K}from"./index-CY6X5-pR.js";import{N as Q,F as ee}from"./footer-D0Duvta5.js";import te from"./hero-section-CRkxMivZ.js";import ae from"./statistik-section-D0C884XP.js";import"./index-Bu85cvBJ.js";import"./index-DmDxDuVC.js";import"./index-BuaMyH5A.js";import"./utils-7joyUr45.js";import"./floating-ui.react-dom-Cj5ko-gG.js";import"./createLucideIcon-e642cJef.js";import"./index-r0pWiDo8.js";import"./index-DL6SR6eN.js";import"./index-CV5ZqQ3o.js";import"./check-DfOmbgjf.js";import"./tslib.es6-BUas5LQb.js";import"./use-mobile-Cf8pF5cu.js";import"./app-logo-icon-CC50b9ZH.js";import"./proxy-D9BFB8lH.js";import"./chart-DfD7v0ci.js";import"./index-CqvUHdYX.js";function J(l,t){const s=U(l,t==null?void 0:t.in);return s.setHours(23,59,59,999),s}function T(l,t){const s=()=>q(t==null?void 0:t.in,NaN),i=re(l);let c;if(i.date){const o=ie(i.date,2);c=ce(o.restDateString,o.year)}if(!c||isNaN(+c))return s();const n=+c;let d=0,m;if(i.time&&(d=de(i.time),isNaN(d)))return s();if(i.timezone){if(m=ue(i.timezone),isNaN(m))return s()}else{const o=new Date(n+d),a=U(0,t==null?void 0:t.in);return a.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),a.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),a}return U(n+d+m,t==null?void 0:t.in)}const y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},se=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ne=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,le=/^([+-])(\d{2})(?::?(\d{2}))?$/;function re(l){const t={},s=l.split(y.dateTimeDelimiter);let r;if(s.length>2)return t;if(/:/.test(s[0])?r=s[0]:(t.date=s[0],r=s[1],y.timeZoneDelimiter.test(t.date)&&(t.date=l.split(y.timeZoneDelimiter)[0],r=l.substr(t.date.length,l.length))),r){const i=y.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function ie(l,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=l.match(s);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?i:c*100,restDateString:l.slice((r[1]||r[2]).length)}}function ce(l,t){if(t===null)return new Date(NaN);const s=l.match(se);if(!s)return new Date(NaN);const r=!!s[4],i=v(s[1]),c=v(s[2])-1,n=v(s[3]),d=v(s[4]),m=v(s[5])-1;if(r)return fe(t,d,m)?oe(t,d,m):new Date(NaN);{const o=new Date(0);return!xe(t,c,n)||!he(t,i)?new Date(NaN):(o.setUTCFullYear(t,c,Math.max(i,n)),o)}}function v(l){return l?parseInt(l):1}function de(l){const t=l.match(ne);if(!t)return NaN;const s=F(t[1]),r=F(t[2]),i=F(t[3]);return je(s,r,i)?s*W+r*$+i*1e3:NaN}function F(l){return l&&parseFloat(l.replace(",","."))||0}function ue(l){if(l==="Z")return 0;const t=l.match(le);if(!t)return 0;const s=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return ge(r,i)?s*(r*W+i*$):NaN}function oe(l,t,s){const r=new Date(0);r.setUTCFullYear(l,0,4);const i=r.getUTCDay()||7,c=(t-1)*7+s+1-i;return r.setUTCDate(r.getUTCDate()+c),r}const me=[31,null,31,30,31,30,31,31,30,31,30,31];function X(l){return l%400===0||l%4===0&&l%100!==0}function xe(l,t,s){return t>=0&&t<=11&&s>=1&&s<=(me[t]||(X(l)?29:28))}function he(l,t){return t>=1&&t<=(X(l)?366:365)}function fe(l,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function je(l,t,s){return l===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&l>=0&&l<25}function ge(l,t){return t>=0&&t<=59}function pe({items:l}){const t=_(),[s,r]=x.useState(""),[i,c]=x.useState(5),[n,d]=x.useState({search:"",startDate:null,endDate:null,status:""});x.useEffect(()=>{const a=setTimeout(()=>{d(u=>({...u,search:s}))},500);return()=>clearTimeout(a)},[s]),x.useEffect(()=>{c(5)},[n]);const m=l.filter(a=>{const u=a.judul.toLowerCase().includes(n.search.toLowerCase()),I=n.status?a.latest_status.status===n.status:!0,p=new Date(a.created_at),D=n.startDate?G(new Date(n.startDate)):null,N=n.endDate?J(new Date(n.endDate)):null,E=(!D||p>=D)&&(!N||p<=N);return u&&I&&E}),o=()=>{d({search:"",startDate:null,endDate:null,status:""}),r("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 mt-6 max-w-3xl items-center gap-2 not-md:space-y-2 md:flex",children:[e.jsx(B,{placeholder:"Cari pengaduan...",className:"text-sm",value:s,onChange:a=>r(a.target.value)}),e.jsxs(C,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{className:"not-md:w-full",variant:"outline",children:n.startDate?j(T(n.startDate),"d MMM yyyy",{locale:g}):"Dari Tanggal"})}),e.jsx(M,{className:"w-auto p-0",align:"start",children:e.jsx(w,{mode:"single",selected:n.startDate?new Date(n.startDate):void 0,onSelect:a=>d(u=>({...u,startDate:a?a.toISOString():null}))})})]}),e.jsxs(C,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{className:"not-md:w-full",variant:"outline",children:n.endDate?j(T(n.endDate),"d MMM yyyy",{locale:g}):"Sampai Tanggal"})}),e.jsx(M,{className:"w-auto p-0",align:"start",children:e.jsx(w,{mode:"single",selected:n.endDate?new Date(n.endDate):void 0,onSelect:a=>d(u=>({...u,endDate:a?a.toISOString():null}))})})]}),e.jsxs(z,{value:n.status,onValueChange:a=>d(u=>({...u,status:a})),children:[e.jsx(A,{className:"md:w-[300px]",children:e.jsx(Z,{placeholder:"Pilih status",className:"whitespace-normal"})}),e.jsx(H,{children:e.jsxs(V,{children:[e.jsx(f,{value:"Diajukan",children:"Diajukan"}),e.jsx(f,{value:"Diproses",children:"Diproses"}),e.jsx(f,{value:"Selesai",children:"Selesai"}),e.jsx(f,{value:"Ditolak",children:"Ditolak"})]})})]}),(n.search||n.endDate||n.startDate||n.status)&&e.jsxs(h,{onClick:o,variant:"ghost",children:[e.jsx(K,{}),"Reset"]})]}),m.length>0?e.jsxs(e.Fragment,{children:[m.slice(0,i).map(a=>e.jsx(b,{className:"mb-4",children:e.jsxs(S,{children:[e.jsxs("div",{className:"items-center justify-between not-md:space-y-3 md:flex",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("p",{children:"Bidang:"}),e.jsx(P,{variant:"outline",children:a.bidang}),e.jsx(P,{className:"ml-4 bg-sky-800",children:a.latest_status.status})]}),e.jsxs("div",{className:"gap-4 text-sm text-gray-700 md:flex",children:[e.jsxs("p",{children:["Dibuat: ",j(a.created_at,"EEEE, d MMMM y",{locale:g})]}),e.jsxs("p",{children:["Pembaruan:"," ",j(a.latest_status.created_at,"EEEE, d MMMM y",{locale:g})]})]})]}),e.jsxs("div",{className:"mt-6 border-b pb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-blue-500",children:a.judul}),e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:L(a.isi,300)})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(R,{src:"/storage/"+a.user.avatar,alt:a.user.name}),e.jsx(Y,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:t(a.user.name)})]}),e.jsx("div",{className:"grid flex-1 items-center text-left text-sm leading-tight",children:e.jsx("span",{className:"truncate font-semibold text-blue-500",children:a.user.name})})]})]})})]})},a.id)),i<m.length&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(h,{onClick:()=>c(a=>a+5),variant:"outline",children:"Lihat Lebih Banyak"})})]}):e.jsx(b,{className:"border-dashed py-10 shadow-none",children:e.jsx(S,{className:"flex items-center justify-center text-gray-500",children:"Tidak ada data ditemukan"})})]})}function De({children:l}){return e.jsxs("div",{className:"flex flex-col flex-1 h-full w-full",children:[e.jsx(Q,{}),l]})}function Ne({items:l}){const t=_(),[s,r]=x.useState(""),[i,c]=x.useState(5),[n,d]=x.useState({search:"",startDate:null,endDate:null,status:""});x.useEffect(()=>{const a=setTimeout(()=>{d(u=>({...u,search:s}))},500);return()=>clearTimeout(a)},[s]),x.useEffect(()=>{c(5)},[n]);const m=l.filter(a=>{const u=a.judul.toLowerCase().includes(n.search.toLowerCase()),I=n.status?a.latest_status.status===n.status:!0,p=new Date(a.created_at),D=n.startDate?G(new Date(n.startDate)):null,N=n.endDate?J(new Date(n.endDate)):null,E=(!D||p>=D)&&(!N||p<=N);return u&&I&&E}),o=()=>{d({search:"",startDate:null,endDate:null,status:""}),r("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 mt-6 max-w-3xl items-center gap-2 not-md:space-y-2 md:flex",children:[e.jsx(B,{placeholder:"Cari pengaduan...",className:"text-sm",value:s,onChange:a=>r(a.target.value)}),e.jsxs(C,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{className:"not-md:w-full",variant:"outline",children:n.startDate?j(T(n.startDate),"d MMM yyyy",{locale:g}):"Dari Tanggal"})}),e.jsx(M,{className:"w-auto p-0",align:"start",children:e.jsx(w,{mode:"single",selected:n.startDate?new Date(n.startDate):void 0,onSelect:a=>d(u=>({...u,startDate:a?a.toISOString():null}))})})]}),e.jsxs(C,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{className:"not-md:w-full",variant:"outline",children:n.endDate?j(T(n.endDate),"d MMM yyyy",{locale:g}):"Sampai Tanggal"})}),e.jsx(M,{className:"w-auto p-0",align:"start",children:e.jsx(w,{mode:"single",selected:n.endDate?new Date(n.endDate):void 0,onSelect:a=>d(u=>({...u,endDate:a?a.toISOString():null}))})})]}),e.jsxs(z,{value:n.status,onValueChange:a=>d(u=>({...u,status:a})),children:[e.jsx(A,{className:"md:w-[300px]",children:e.jsx(Z,{placeholder:"Pilih status",className:"whitespace-normal"})}),e.jsx(H,{children:e.jsxs(V,{children:[e.jsx(f,{value:"Diajukan",children:"Diajukan"}),e.jsx(f,{value:"Diproses",children:"Diproses"}),e.jsx(f,{value:"Selesai",children:"Selesai"}),e.jsx(f,{value:"Ditolak",children:"Ditolak"})]})})]}),(n.search||n.endDate||n.startDate||n.status)&&e.jsxs(h,{onClick:o,variant:"ghost",children:[e.jsx(K,{}),"Reset"]})]}),m.length>0?e.jsxs(e.Fragment,{children:[m.slice(0,i).map(a=>e.jsx(b,{className:"mb-4",children:e.jsxs(S,{children:[e.jsxs("div",{className:"items-center justify-between not-md:space-y-3 md:flex",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("p",{children:"Bidang:"}),e.jsx(P,{className:"ml-4 bg-sky-800",children:a.latest_status.status})]}),e.jsxs("div",{className:"gap-4 text-sm text-gray-700 md:flex",children:[e.jsxs("p",{children:["Dibuat: ",j(a.created_at,"EEEE, d MMMM y",{locale:g})]}),e.jsxs("p",{children:["Pembaruan:"," ",j(a.latest_status.created_at,"EEEE, d MMMM y",{locale:g})]})]})]}),e.jsxs("div",{className:"mt-6 border-b pb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-blue-500",children:a.judul}),e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:L(a.kronologi,300)})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(R,{src:"/storage/"+a.user.avatar,alt:a.user.name}),e.jsx(Y,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:t(a.user.name)})]}),e.jsx("div",{className:"grid flex-1 items-center text-left text-sm leading-tight",children:e.jsx("span",{className:"truncate font-semibold text-blue-500",children:a.user.name})})]})]})})]})},a.id)),i<m.length&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(h,{onClick:()=>c(a=>a+5),variant:"outline",children:"Lihat Lebih Banyak"})})]}):e.jsx(b,{className:"border-dashed py-10 shadow-none",children:e.jsx(S,{className:"flex items-center justify-center text-gray-500",children:"Tidak ada data ditemukan"})})]})}function qe({pengaduanKhusus:l,pengaduans:t,chartData:s,countAllPengaduan:r,countPengaduanDiproses:i,countPengaduanSelesai:c}){return _(),e.jsx(De,{children:e.jsxs("div",{className:"flex h-full w-full flex-1 flex-col",children:[e.jsx(te,{}),e.jsx(ae,{data:{chartData:s,countAllPengaduan:r,countPengaduanDiproses:i,countPengaduanSelesai:c}}),e.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col p-4 py-20",children:[e.jsx("h1",{className:"md:text-4xl text-3xl font-semibold text-gray-800",children:"Daftar Pengaduan Umum"}),e.jsx(pe,{items:t})]}),e.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col p-4 py-20",children:[e.jsx("h1",{className:"md:text-4xl text-3xl font-semibold text-gray-800",children:"Daftar Pengaduan Khusus"}),e.jsx(Ne,{items:l})]}),e.jsx(ee,{})]})})}export{qe as default};
