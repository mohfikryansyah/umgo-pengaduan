import{j as e,r as v,S as H,V as m,m as F,K as L}from"./app-w6QwSvNn.js";import{c as h}from"./utils-jAU0Cazi.js";import{B as A}from"./badge-CTppRCHH.js";import{I as C}from"./input-error-Dj2IlA42.js";import{u as P,A as I,a as B,b as V}from"./avatar-D1hwYsAE.js";import{B as x,d as O}from"./button-zN_W_1eC.js";import{C as w,a as D,b as T,c as E}from"./card-CZoZZmJg.js";import{D as z,a as G,b as R,c as K}from"./dialog-CeL6iTp_.js";import{T as W,a as Y}from"./triangle-alert-Dmb9d3RM.js";import{f as u,i as g}from"./id-CUEIbMhn.js";import{L as M}from"./label-BnT0mk5h.js";import{S as q,a as J,b as Q,c as U,d as X,e as o}from"./select-CA9Hvfff.js";import{T as Z}from"./textarea-IxNWYSF5.js";import{h as N}from"./helpers-Bw55Ac1T.js";import{A as $}from"./app-layout-BgsDzZvD.js";import ee from"./form-tanggapan-B9WvLeYh.js";import"./index-Boq8JXzK.js";import"./index-CLLk-lZZ.js";import"./index-Cbl4rifO.js";import"./index-8Kv_REnq.js";import"./createLucideIcon-DFnSf-LW.js";import"./index-rHHZrcK-.js";import"./use-mobile-Dc2VDZzG.js";import"./floating-ui.react-dom-Dv-tBYU2.js";import"./index-BwiSU22v.js";import"./check-DkGWN5vn.js";import"./index-B09ykAsP.js";import"./app-logo-icon-uViXqrL4.js";function se({title:s,description:r,bidang:l,className:t=""}){return e.jsxs("div",{className:h("space-y-0.5",t),children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("h2",{className:"max-w-xl text-xl font-semibold tracking-tight",children:s}),e.jsx(A,{variant:"outline",children:l})]}),r&&e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:r})]})}function ae({items:s}){const r=P(),[l,t]=v.useState(!1),[S,_]=v.useState(!1),[j,i]=v.useState(null),p=a=>{H.delete(route("tanggapan.destroy",{tanggapan:a}),{preserveState:!0,onSuccess:()=>{m.success("Berhasil menghapus tanggapan"),t(!1),i(null)},onError:n=>{m.error(n[0]),i(null),t(!1)}})};return e.jsx("div",{className:"relative space-y-6 border-l-2 border-dashed border-blue-500 pl-6",children:s.map((a,n)=>{const f=u(a.created_at,"EEEE, d MMMM y",{locale:g}),d=u(a.created_at,"HH:mm",{locale:g});return e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute top-1 -left-[31px] h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600",children:f}),e.jsx("div",{className:"text-xs text-gray-500",children:d})]}),e.jsx(w,{children:e.jsxs(D,{className:"flex gap-4",children:[e.jsxs(I,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(B,{src:"/storage/"+a.user.avatar,alt:a.user.name}),e.jsx(V,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:r(a.user.name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:a.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.user.roles})]})}),e.jsx("p",{className:"mt-2 text-sm",children:a.tanggapan})]}),e.jsxs(z,{open:j===a.id,onOpenChange:b=>i(b?a.id:null),children:[e.jsx(G,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",children:e.jsx(W,{className:"h-4 w-4 text-red-500"})})}),e.jsx(R,{className:"sm:max-w-[425px]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-red-200",children:e.jsx(Y,{className:"h-8 w-8 text-red-500"})}),e.jsx("h1",{className:"mt-4 text-lg font-bold",children:"Hapus Tanggapan"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Apakah Anda yakin ingin menghapus ini?"}),e.jsxs("div",{className:"mt-4 grid w-full grid-cols-2 gap-x-2",children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Batal"})}),e.jsx(x,{variant:"default",className:"bg-red-500 transition-all duration-300 hover:bg-red-600 active:scale-90",disabled:l,onClick:()=>{t(!0),p(a)},"aria-label":"Delete row",children:"Ya, saya yakin!"})]})]})})]})]})})]},a.id)})})}const te=O("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function y({className:s,variant:r,...l}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:h(te({variant:r}),s),...l})}function k({className:s,...r}){return e.jsx("div",{"data-slot":"alert-description",className:h("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...r})}const re=[{title:"Pengaduan",href:route("pengaduan.index")},{title:"Detail Pengaduan",href:"#"}],le={Diajukan:"bg-yellow-500 text-yellow-100",Diproses:"bg-blue-500 text-blue-100",Selesai:"bg-green-500 text-green-100",Ditolak:"bg-red-500 text-red-100"};function Ie({pengaduan:s}){const r=u(s.created_at,"EEEE, d MMMM y",{locale:g}),l=u(s.latest_status.created_at,"EEEE, d MMMM y",{locale:g}),t=s.user,S=P(),_=le[s.latest_status.status]??"bg-gray-500 text-white",{data:j,setData:i,put:p,processing:a,errors:n,reset:f}=F({status:"",tindakan:""}),{auth:d}=L().props,b=c=>{c.preventDefault(),p(route("pengaduan.update",{pengaduan:s}),{onSuccess:()=>{m.success("Berhasil memperbarui status"),f()},onError:()=>m.error("Gagal memperbarui status")})};return e.jsx($,{breadcrumbs:re,children:e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"flex w-full gap-x-3 not-lg:flex-col not-lg:gap-y-3",children:[e.jsxs("div",{className:"w-full max-w-4xl not-lg:order-2",children:[s.validasi_rektor===1?e.jsx(y,{className:"mb-3 border-green-500 bg-green-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah divalidasi rektor"})})}):s.validasi_rektor===0?e.jsx(y,{className:"mb-3 border-red-500 bg-red-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah ditolak rektor"})})}):e.jsx(y,{className:"mb-3 border-yellow-500 bg-yellow-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Menunggu validasi rektor"})})}),e.jsx(se,{title:s.judul,description:s.isi,bidang:s.bidang,className:"border-b pb-3"}),N(d.user,["admin","warek_1","warek_2","warek_3","rektor"])&&e.jsx(ee,{pengaduan:s}),e.jsx(ae,{items:s.tanggapans})]}),e.jsxs("div",{className:"w-full space-y-5 lg:max-w-sm",children:[e.jsxs(w,{className:"shadow-none",children:[e.jsx(T,{children:e.jsx(E,{children:"Info Pengaduan"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx(A,{className:h(_),children:s.latest_status.status})]}),s.latest_status.tindakan&&e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tindakan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.latest_status.tindakan})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diajukan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:r})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembaruan Terakhir:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:l})]})]}),N(d.user,["admin","warek_1","warek_2","warek_3"])&&e.jsxs("div",{className:"mt-5 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(B,{src:"/storage/"+t.avatar,alt:t.name}),e.jsx(V,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:S(t.name)})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold text-blue-500",children:t.name}),e.jsx("span",{className:"text-muted-foreground truncate text-xs",children:t.nim})]})]})]})]})]}),N(d.user,["admin"])&&e.jsxs(w,{className:"shadow-none",children:[e.jsx(T,{children:e.jsx(E,{children:"Perbarui Status"})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(M,{children:"Status"}),e.jsxs(q,{onValueChange:c=>i("status",c),children:[e.jsx(J,{className:"w-full",children:e.jsx(Q,{placeholder:"Pilih status baru"})}),e.jsx(U,{children:e.jsxs(X,{children:[e.jsx(o,{value:"Diajukan",children:"Diajukan"}),e.jsx(o,{value:"Diproses",children:"Diproses"}),e.jsx(o,{value:"Selesai",children:"Selesai"}),e.jsx(o,{value:"Ditolak",children:"Ditolak"})]})}),e.jsx(C,{message:n.status})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(M,{htmlFor:"tindakan",children:"Tindakan"}),e.jsx(Z,{id:"tindakan",value:j.tindakan,onChange:c=>i("tindakan",c.target.value)}),e.jsx(C,{message:n.tindakan})]}),e.jsx(x,{disabled:a,children:"Simpan"})]})})]})]})]})})})}export{Ie as default};
