import{m as F,r as o,K as b,j as e,S as y,V as u}from"./app-CpIO0Rgy.js";import{I as E}from"./input-error-BSxE3N4l.js";import{I as N}from"./input-DgS3hD2R.js";import{L as P}from"./label-BdwFL513.js";import{H as R}from"./heading-small-oA0KAywQ.js";import{B as w}from"./button-CRQ7621k.js";import{z as D}from"./transition-C9Eesbeg.js";import"./utils-7joyUr45.js";import"./index-DmDxDuVC.js";import"./index-BuaMyH5A.js";function T(){const{data:d,setData:i,processing:n,errors:r,recentlySuccessful:f}=F({avatar:null}),[v,x]=o.useState({}),{auth:h}=b().props,t=o.useRef(null),[l,j]=o.useState(""),g=s=>{s.preventDefault(),y.post(route("profile.update.photo"),{_method:"put",avatar:d.avatar},{forceFormData:!0,preserveState:!0,onSuccess:()=>{i("avatar",null),u.success("Foto profil berhasil diperbarui"),t.current&&(t.current.value="")},onError:a=>{x(a),u.error("Gagal memperbarui foto profil!")}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(R,{title:"Foto Profil",description:"Perbarui foto profil Anda"}),e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(P,{htmlFor:"avatar",children:"Foto"}),e.jsx(N,{ref:t,id:"avatar",name:"avatar",type:"file",accept:"image/*",onChange:s=>{var c;const a=(c=s.target.files)==null?void 0:c[0];if(a){i("avatar",a);const m=new FileReader;m.onload=S=>{var p;j((p=S.target)==null?void 0:p.result)},m.readAsDataURL(a)}},disabled:n}),e.jsx(E,{message:v.avatar||(r==null?void 0:r.avatar)})]}),l&&e.jsx("div",{className:"grid gap-2",children:e.jsx("img",{src:l,alt:`Foto ${h.user.name}`})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{disabled:n,children:"Save"}),e.jsx(D,{show:f,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})}export{T as default};
