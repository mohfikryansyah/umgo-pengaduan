import{j as e,m as E,K as P,V as x}from"./app-CpIO0Rgy.js";import{c as k,f as M}from"./utils-7joyUr45.js";import{D as T,a as B,b as I}from"./dialog-UJbZK-NC.js";import{I as h}from"./input-error-BSxE3N4l.js";import{A as n,a as d}from"./alert-CQsplZYT.js";import{u as V,A as K,a as L,b as F}from"./avatar-DuCOGHgW.js";import{B as G}from"./badge-FCzo2BBg.js";import{B as R}from"./button-CRQ7621k.js";import{C as u,b as j,c as g,a as f}from"./card-DdZHFTlX.js";import{L as p}from"./label-BdwFL513.js";import{S as z,a as H,b as q,c as J,d as O,e as l}from"./select-Cce8IxgA.js";import{T as Q}from"./textarea-Bu7ySTs_.js";import{h as N}from"./helpers-Bw55Ac1T.js";import{A as U}from"./app-layout-DgW7oj5E.js";import{f as b,i as v}from"./id-CN8iUG6p.js";import"./index-CY6X5-pR.js";import"./createLucideIcon-e642cJef.js";import"./index-BuaMyH5A.js";import"./tslib.es6-BUas5LQb.js";import"./index-Bu85cvBJ.js";import"./index-DmDxDuVC.js";import"./index-r0pWiDo8.js";import"./index-DL6SR6eN.js";import"./floating-ui.react-dom-Cj5ko-gG.js";import"./index-CV5ZqQ3o.js";import"./check-DfOmbgjf.js";import"./use-mobile-Cf8pF5cu.js";import"./index-CeDnUl2S.js";import"./app-logo-icon-CC50b9ZH.js";function W({pengaduan:s,className:i}){return console.log(s),e.jsxs("div",{className:k("space-y-0.5",i),children:[e.jsx("div",{className:"flex w-full items-center justify-between",children:e.jsx("h2",{className:"max-w-xl text-xl font-semibold tracking-tight",children:s.judul})}),s.kronologi&&e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:s.kronologi}),e.jsx("div",{className:"mt-5 flex max-w-xl",children:s.berkas.map((t,a)=>e.jsxs(T,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex max-w-fit gap-x-2 rounded-lg px-3 py-1.5 hover:bg-gray-100",children:[e.jsx("div",{className:"h-11 w-8 overflow-hidden",children:e.jsx("img",{src:"/storage/"+t.path_berkas,alt:"Berkas"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["Berkas ",a+1]}),e.jsx("span",{className:"text-sm text-gray-600",children:M(t.size)})]})]})}),e.jsx(I,{className:"overflow-hidden",children:e.jsx("img",{src:"/storage/"+t.path_berkas,alt:"Berkas"})})]}))})]})}const X=[{title:"Pengaduan",href:route("pengaduan.index")},{title:"Detail Pengaduan",href:"#"}],Y={Diajukan:"bg-yellow-500 text-yellow-100",Diproses:"bg-blue-500 text-blue-100",Selesai:"bg-green-500 text-green-100",Ditolak:"bg-red-500 text-red-100"};function Ce({pengaduan:s}){console.log(s);const i=b(s.created_at,"EEEE, d MMMM y",{locale:v}),t=b(s.latest_status.created_at,"EEEE, d MMMM y",{locale:v}),a=s.user,y=V(),w=Y[s.latest_status.status]??"bg-gray-500 text-white",{data:D,setData:c,put:S,processing:C,errors:m,reset:_}=E({status:"",tindakan:""}),{auth:o}=P().props,A=r=>{r.preventDefault(),S(route("pengaduan.update",{pengaduan:s}),{onSuccess:()=>{x.success("Berhasil memperbarui status"),_()},onError:()=>x.error("Gagal memperbarui status")})};return e.jsx(U,{breadcrumbs:X,children:e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"flex w-full gap-x-5 not-lg:flex-col not-lg:gap-y-3",children:[e.jsxs("div",{className:"w-full max-w-4xl not-lg:order-2",children:[s.validasi_rektor===1?e.jsx(n,{className:"mb-3 border-green-500 bg-green-100",children:e.jsx(d,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah divalidasi rektor"})})}):s.validasi_rektor===0?e.jsx(n,{className:"mb-3 border-red-500 bg-red-100",children:e.jsx(d,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah ditolak rektor"})})}):e.jsx(n,{className:"mb-3 border-yellow-500 bg-yellow-100",children:e.jsx(d,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Menunggu validasi rektor"})})}),e.jsx(W,{pengaduan:s,className:"border-b pb-3"})]}),e.jsxs("div",{className:"w-full space-y-5 lg:max-w-sm",children:[e.jsxs(u,{className:"shadow-none",children:[e.jsx(j,{children:e.jsx(g,{children:"Info Pengaduan Khusus"})}),e.jsxs(f,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx(G,{className:k(w),children:s.latest_status.status})]}),s.latest_status.tindakan&&e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tindakan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.latest_status.tindakan})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diajukan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:i})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembaruan Terakhir:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t})]})]}),N(o.user,["admin","warek_1","warek_2","warek_3"])&&e.jsxs("div",{className:"mt-5 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(L,{src:"/storage/"+a.avatar,alt:a.name}),e.jsx(F,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:y(a.name)})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold text-blue-500",children:a.name}),e.jsx("span",{className:"text-muted-foreground truncate text-xs",children:a.nim})]})]})]})]})]}),N(o.user,["admin"])&&e.jsxs(u,{className:"shadow-none",children:[e.jsx(j,{children:e.jsx(g,{children:"Perbarui Status"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{children:"Status"}),e.jsxs(z,{onValueChange:r=>c("status",r),children:[e.jsx(H,{className:"w-full",children:e.jsx(q,{placeholder:"Pilih status baru"})}),e.jsx(J,{children:e.jsxs(O,{children:[e.jsx(l,{value:"Diajukan",children:"Diajukan"}),e.jsx(l,{value:"Diproses",children:"Diproses"}),e.jsx(l,{value:"Selesai",children:"Selesai"}),e.jsx(l,{value:"Ditolak",children:"Ditolak"})]})}),e.jsx(h,{message:m.status})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"tindakan",children:"Tindakan"}),e.jsx(Q,{id:"tindakan",value:D.tindakan,onChange:r=>c("tindakan",r.target.value)}),e.jsx(h,{message:m.tindakan})]}),e.jsx(R,{disabled:C,children:"Simpan"})]})})]})]})]})})})}export{Ce as default};
