import{j as e,r as N,S as L,V as m,m as O,K as G}from"./app-CDETa4Hd.js";import{c as g,f as R}from"./utils-7joyUr45.js";import{B as A}from"./badge-CLpm4uUP.js";import{D as P,a as B,b as I,c as K}from"./dialog-BZ_C3oOE.js";import{I as C}from"./input-error-Bj17J-LD.js";import{u as V,A as H,a as z,b as F}from"./avatar-BCUtmGr6.js";import{B as x,d as W}from"./button-D2PzfR0O.js";import{C as w,a as D,b as T,c as E}from"./card--EpSPgor.js";import{T as Y,a as q}from"./triangle-alert-B8iG6nOD.js";import{f as u,i as h}from"./id-CUEIbMhn.js";import{L as M}from"./label-CoibCSdE.js";import{S as J,a as Q,b as U,c as X,d as Z,e as o}from"./select-DyJvFPmA.js";import{T as $}from"./textarea-BGFbMMZr.js";import{h as b}from"./helpers-Bw55Ac1T.js";import{A as ee}from"./app-layout-D3z3y3gB.js";import se from"./form-tanggapan-Bx7yXAmE.js";import"./index-BZA1-Wlo.js";import"./createLucideIcon-toiSKoVf.js";import"./index-Bw85EvTU.js";import"./tslib.es6-BUas5LQb.js";import"./index-IT8LveJ4.js";import"./index-DPBEDuac.js";import"./index-P2HfiIiT.js";import"./index-CPliXW_Z.js";import"./floating-ui.react-dom-C39HHf4G.js";import"./index-Ck1-PrDL.js";import"./check-D4A6hHJ8.js";import"./use-mobile-WLVraRkV.js";import"./index-BBojltk1.js";import"./app-logo-icon-DZJj4lHO.js";function ae({pengaduan:s,className:r}){return console.log(s),e.jsxs("div",{className:g("space-y-0.5",r),children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("h2",{className:"max-w-xl text-xl font-semibold tracking-tight",children:s.judul}),e.jsx(A,{variant:"outline",children:s.bidang})]}),s.isi&&e.jsx("p",{className:"mt-2 text-sm leading-6 text-gray-600",children:s.isi}),e.jsx("div",{className:"mt-5 flex max-w-xl",children:s.berkas.map((l,t)=>e.jsxs(P,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex max-w-fit gap-x-2 rounded-lg px-3 py-1.5 hover:bg-gray-100",children:[e.jsx("div",{className:"h-11 w-8 overflow-hidden",children:e.jsx("img",{src:"/storage/"+l.path_berkas,alt:"Berkas"})}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:["Berkas ",t+1]}),e.jsx("span",{className:"text-sm text-gray-600",children:R(l.size)})]})]})}),e.jsx(I,{className:"overflow-hidden",children:e.jsx("img",{src:"/storage/"+l.path_berkas,alt:"Berkas"})})]}))})]})}function te({items:s}){const r=V(),[l,t]=N.useState(!1),[S,_]=N.useState(!1),[j,i]=N.useState(null),p=a=>{L.delete(route("tanggapan.destroy",{tanggapan:a}),{preserveState:!0,onSuccess:()=>{m.success("Berhasil menghapus tanggapan"),t(!1),i(null)},onError:n=>{m.error(n[0]),i(null),t(!1)}})};return e.jsx("div",{className:"relative space-y-6 border-l-2 border-dashed border-blue-500 pl-6",children:s.map((a,n)=>{const f=u(a.created_at,"EEEE, d MMMM y",{locale:h}),d=u(a.created_at,"HH:mm",{locale:h});return e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute top-1 -left-[31px] h-3 w-3 rounded-full border-2 border-white bg-blue-500"}),e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600",children:f}),e.jsx("div",{className:"text-xs text-gray-500",children:d})]}),e.jsx(w,{children:e.jsxs(D,{className:"flex gap-4",children:[e.jsxs(H,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(z,{src:"/storage/"+a.user.avatar,alt:a.user.name}),e.jsx(F,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:r(a.user.name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:a.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.user.roles})]})}),e.jsx("p",{className:"mt-2 text-sm",children:a.tanggapan})]}),e.jsxs(P,{open:j===a.id,onOpenChange:v=>i(v?a.id:null),children:[e.jsx(B,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",children:e.jsx(Y,{className:"h-4 w-4 text-red-500"})})}),e.jsx(I,{className:"sm:max-w-[425px]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-red-200",children:e.jsx(q,{className:"h-8 w-8 text-red-500"})}),e.jsx("h1",{className:"mt-4 text-lg font-bold",children:"Hapus Tanggapan"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Apakah Anda yakin ingin menghapus ini?"}),e.jsxs("div",{className:"mt-4 grid w-full grid-cols-2 gap-x-2",children:[e.jsx(K,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Batal"})}),e.jsx(x,{variant:"default",className:"bg-red-500 transition-all duration-300 hover:bg-red-600 active:scale-90",disabled:l,onClick:()=>{t(!0),p(a)},"aria-label":"Delete row",children:"Ya, saya yakin!"})]})]})})]})]})})]},a.id)})})}const re=W("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function y({className:s,variant:r,...l}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:g(re({variant:r}),s),...l})}function k({className:s,...r}){return e.jsx("div",{"data-slot":"alert-description",className:g("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...r})}const le=[{title:"Pengaduan",href:route("pengaduan.index")},{title:"Detail Pengaduan",href:"#"}],ie={Diajukan:"bg-yellow-500 text-yellow-100",Diproses:"bg-blue-500 text-blue-100",Selesai:"bg-green-500 text-green-100",Ditolak:"bg-red-500 text-red-100"};function He({pengaduan:s}){const r=u(s.created_at,"EEEE, d MMMM y",{locale:h}),l=u(s.latest_status.created_at,"EEEE, d MMMM y",{locale:h}),t=s.user,S=V(),_=ie[s.latest_status.status]??"bg-gray-500 text-white",{data:j,setData:i,put:p,processing:a,errors:n,reset:f}=O({status:"",tindakan:""}),{auth:d}=G().props,v=c=>{c.preventDefault(),p(route("pengaduan.update",{pengaduan:s}),{onSuccess:()=>{m.success("Berhasil memperbarui status"),f()},onError:()=>m.error("Gagal memperbarui status")})};return e.jsx(ee,{breadcrumbs:le,children:e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"flex w-full gap-x-3 not-lg:flex-col not-lg:gap-y-3",children:[e.jsxs("div",{className:"w-full max-w-4xl not-lg:order-2",children:[s.validasi_rektor===1?e.jsx(y,{className:"mb-3 border-green-500 bg-green-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah divalidasi rektor"})})}):s.validasi_rektor===0?e.jsx(y,{className:"mb-3 border-red-500 bg-red-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Telah ditolak rektor"})})}):e.jsx(y,{className:"mb-3 border-yellow-500 bg-yellow-100",children:e.jsx(k,{className:"justify-center text-gray-800",children:e.jsx("span",{className:"font-bold",children:"Menunggu validasi rektor"})})}),e.jsx(ae,{pengaduan:s,className:"border-b pb-3"}),b(d.user,["admin","warek_1","warek_2","warek_3","rektor"])&&e.jsx(se,{pengaduan:s}),e.jsx(te,{items:s.tanggapans})]}),e.jsxs("div",{className:"w-full space-y-5 lg:max-w-sm",children:[e.jsxs(w,{className:"shadow-none",children:[e.jsx(T,{children:e.jsx(E,{children:"Info Pengaduan"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status:"}),e.jsx(A,{className:g(_),children:s.latest_status.status})]}),s.latest_status.tindakan&&e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tindakan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.latest_status.tindakan})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diajukan:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:r})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembaruan Terakhir:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:l})]})]}),b(d.user,["admin","warek_1","warek_2","warek_3"])&&e.jsxs("div",{className:"mt-5 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Pengaduan dari:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{className:"h-8 w-8 overflow-hidden rounded-full",children:[e.jsx(z,{src:"/storage/"+t.avatar,alt:t.name}),e.jsx(F,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:S(t.name)})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold text-blue-500",children:t.name}),e.jsx("span",{className:"text-muted-foreground truncate text-xs",children:t.nim})]})]})]})]})]}),b(d.user,["admin"])&&e.jsxs(w,{className:"shadow-none",children:[e.jsx(T,{children:e.jsx(E,{children:"Perbarui Status"})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(M,{children:"Status"}),e.jsxs(J,{onValueChange:c=>i("status",c),children:[e.jsx(Q,{className:"w-full",children:e.jsx(U,{placeholder:"Pilih status baru"})}),e.jsx(X,{children:e.jsxs(Z,{children:[e.jsx(o,{value:"Diajukan",children:"Diajukan"}),e.jsx(o,{value:"Diproses",children:"Diproses"}),e.jsx(o,{value:"Selesai",children:"Selesai"}),e.jsx(o,{value:"Ditolak",children:"Ditolak"})]})}),e.jsx(C,{message:n.status})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(M,{htmlFor:"tindakan",children:"Tindakan"}),e.jsx($,{id:"tindakan",value:j.tindakan,onChange:c=>i("tindakan",c.target.value)}),e.jsx(C,{message:n.tindakan})]}),e.jsx(x,{disabled:a,children:"Simpan"})]})})]})]})]})})})}export{He as default};
